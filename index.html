<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShadowGPT | Baby API Chat</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
  .glass {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.2);
  }
</style>

</head>
<body class="bg-gray-900 text-white">

<div class="flex justify-center items-center h-screen px-4">
  <div class="glass w-full max-w-md h-[600px] rounded-2xl p-4 flex flex-col">

    <h2 class="text-center font-bold text-2xl mb-3">ShadowGPT Chat</h2>

    <!-- Messages -->
    <div id="chat" class="flex-1 overflow-y-auto space-y-3 p-2"></div>

    <!-- Input -->
    <div class="mt-3 flex gap-2">
      <input id="msg" type="text" placeholder="Type your message..."
        class="flex-1 px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none">
      <button onclick="sendMessage()"
        class="px-4 py-2 bg-purple-600 rounded-lg hover:bg-purple-700">Send</button>
    </div>

  </div>
</div>

<script>
async function sendMessage() {
  const input = document.getElementById('msg');
  const text = input.value.trim();
  if (!text) return;

  addMessage('You', text);
  input.value = "";

  try {
    const res = await fetch(`https://test-baby-file.vercel.app/?msg=${encodeURIComponent(text)}`);
    const data = await res.json();

    const reply = data?.reply || "No response received.";
    addMessage('ShadowGPT', reply);

  } catch (err) {
    addMessage('ShadowGPT', "Error reaching API.");
  }
}

function addMessage(sender, text) {
  const chat = document.getElementById('chat');
  const bubble = document.createElement('div');

  bubble.className =
    sender === 'You'
    ? "text-right"
    : "text-left";

  bubble.innerHTML =
    `<div class="inline-block px-4 py-2 rounded-xl glass max-w-[80%]">
        <b>${sender}:</b> ${text}
     </div>`;

  chat.appendChild(bubble);
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
